"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[255],{3255:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100vh"}},[t("el-container",{staticStyle:{height:"100%"}},[t("el-header",{attrs:{height:"80px"}},[t("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[t("el-avatar",{staticClass:"avatar top_avatar",attrs:{src:a(3137),size:56}})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{icon:"el-icon-user",command:"GoUserInfo"}},[e._v("账户详情")]),t("el-dropdown-item",{attrs:{icon:"el-icon-circle-close",command:"logout"}},[e._v("退出登录")])],1)],1)],1),t("el-container",[t("el-aside",{attrs:{width:"260px"}},[t("div",{staticClass:"user_panel"},[t("div",{staticClass:"column left"},[t("el-avatar",{staticClass:"avatar left_avatar",attrs:{src:a(3137),size:70}})],1),t("div",{staticClass:"column right"},[t("div",{staticClass:"user_info"},[t("span",{staticStyle:{"font-size":"18px",color:"blue","font-family":"'黑体'"}},[t("b",[e._v("超级管理员")])]),t("span",{attrs:{id:"current_time"}})])])]),t("div",{staticClass:"user_function"},[t("el-menu",{staticClass:"el-menu-vertical_demo",attrs:{"default-active":e.activeTabsValue,"background-color":"rgb(240, 248, 255)","text-color":"#000000","active-text-color":"rgb(0, 0, 255)"}},[t("el-submenu",{staticClass:"vertical_navi",attrs:{index:"submenu1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),t("span",{staticClass:"function_text"},[e._v("类型与角色管理")])]),t("el-menu-item",{staticClass:"vertical_navi",attrs:{index:"1"},on:{click:function(t){return e.checkTab("1","类型管理")}}},[t("i",{staticClass:"el-icon-s-operation"}),e._v(" 类型管理 ")]),t("el-menu-item",{staticClass:"vertical_navi",attrs:{index:"2"},on:{click:function(t){return e.checkTab("2","角色管理")}}},[t("i",{staticClass:"el-icon-s-custom"}),e._v(" 角色管理 ")])],2),t("el-menu-item",{staticClass:"vertical_navi",attrs:{index:"3"},on:{click:function(t){return e.checkTab("3","类型授权")}}},[t("i",{staticClass:"el-icon-s-tools"}),t("span",{staticClass:"function_text"},[e._v("类型授权")])])],1)],1)]),t("el-main",[t("el-dialog",{attrs:{title:"增加类型",visible:e.add_typeFormVisible,width:"500px"},on:{"update:visible":function(t){e.add_typeFormVisible=t}}},[t("el-form",{attrs:{model:e.add_typeFormData}},[t("el-form-item",{attrs:{label:"角色类型","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.add_typeFormData.typeName,callback:function(t){e.$set(e.add_typeFormData,"typeName",t)},expression:"add_typeFormData.typeName"}})],1),t("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.add_typeFormData.notes,callback:function(t){e.$set(e.add_typeFormData,"notes",t)},expression:"add_typeFormData.notes"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close_addRoleTypeForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAddRoleType()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"设置权限",visible:e.changeTypeAuthorityFormVisible,width:"500px"},on:{"update:visible":function(t){e.changeTypeAuthorityFormVisible=t}}},[t("el-tree",{ref:"tree",staticClass:"tree",attrs:{data:e.treeData,"node-key":"id","highlight-current":"",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function({node:a}){return t("span",{staticClass:"custom-tree-node"},[t("span",[a.data.children.length>0?t("i",{staticClass:"el-icon-folder-opened"}):0==a.data.children.length?t("i",{staticClass:"el-icon-collection-tag"}):e._e(),e._v(" "+e._s(a.data.label)+" ")]),void 0!==a.checked?t("el-checkbox",{on:{change:function(t){return e.handleCheckChange(a)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"node.checked"}}):e._e()],1)}}])}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close_changeRoleAuthorityForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmChangeRoleAuthorityRow()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"增加角色",visible:e.add_roleFormVisible,width:"500px"},on:{"update:visible":function(t){e.add_roleFormVisible=t}}},[t("el-form",{attrs:{model:e.add_roleFormData}},[t("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.add_roleFormData.roleName,callback:function(t){e.$set(e.add_roleFormData,"roleName",t)},expression:"add_roleFormData.roleName"}})],1),t("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.add_roleFormData.notes,callback:function(t){e.$set(e.add_roleFormData,"notes",t)},expression:"add_roleFormData.notes"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close_addRoleForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAddRole(e.roleListIndex-"0")}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"添加用户",visible:e.add_userFormVisible,width:"800px"},on:{"update:visible":function(t){e.add_userFormVisible=t}}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,"row-class-name":e.tableRowClassName,size:"mini",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"}}),t("el-table-column",{attrs:{prop:"notes",label:"备注",width:""}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close_addUserForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAddUser()}}},[e._v("确 定")])],1)],1),"0"===e.activeTabsValue?t("div",{staticStyle:{width:"100%",height:"100%","text-align":"center","line-height":"80vh"}},[e._v("主页 ")]):e._e(),e.activeTabsValue>0?t("div",{staticStyle:{height:"100%"}},[t("div",{staticStyle:{height:"40px"}},[t("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab},model:{value:e.activeTabsValue,callback:function(t){e.activeTabsValue=t},expression:"activeTabsValue"}},e._l(e.editableTabs,(function(e){return t("el-tab-pane",{key:e.index,attrs:{label:e.name,name:e.index}})})),1)],1),"1"===e.activeTabsValue?t("div",[t("el-button",{staticStyle:{margin:"10px 0 10px 10px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.open_addRoleTypeForm()}}},[e._v(" 增加类型 ")]),t("el-table",{staticStyle:{width:"100vw"},attrs:{data:e.roleMap,"row-class-name":e.tableRowClassName,size:"mini",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"类型",width:"260"}}),t("el-table-column",{attrs:{prop:"",label:"角色数量",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.roleArrayByTypeNum[t.$index].length)+" ")]}}],null,!1,2475463983)}),t("el-table-column",{attrs:{prop:"",label:"首页",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.roleMap[t.$index].homeName)+" ")]}}],null,!1,4155752907)}),t("el-table-column",{attrs:{label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table_operate_column"},[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit",round:""},on:{click:function(t){return e.changeType(a.$index)}}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",round:"",size:"small"},on:{click:function(t){return e.confirmDeleteMessage()}}})],1)]}}],null,!1,3861288542)})],1)],1):"2"===e.activeTabsValue?t("div",{staticStyle:{height:"calc(100% - 40px)"}},[t("div",{staticClass:"user_column role_list"},[t("div",{staticStyle:{height:"50px","text-align":"center","line-height":"50px",color:"dodgerblue","user-select":"none",background:"rgb(240, 240, 240)"}},[e._v(" 选择角色 ")]),t("el-menu",{staticClass:"role-list-el-menu",attrs:{"default-active":e.roleListIndex,"text-color":"#000","active-text-color":"dodgerblue"}},e._l(e.roleMap,(function(a,l){return t("el-menu-item",{key:a.typeNum,staticClass:"vertical_navi roleType",attrs:{index:l.toString()}},[t("el-popover",{ref:"popoverRef",refInFor:!0,attrs:{placement:"right-start",width:"700",trigger:"click"}},[t("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.open_addRoleForm(l)}}},[e._v(" 增加角色 ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleArrayByTypeNum[a.typeNum-1],"row-class-name":e.tableRowClassName,size:"mini",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"200"}}),t("el-table-column",{attrs:{label:"用户数量",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.users.length)+" ")]}}],null,!0)}),t("el-table-column",{attrs:{prop:"notes",label:"备注",width:"200"}}),t("el-table-column",{attrs:{label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table_operate_column"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showRoleUser(l,a.$index)}}},[e._v(" 查看当前角色的所有用户 ")])],1)]}}],null,!0)})],1),t("span",{staticStyle:{display:"block",height:"100%",width:"100%"},attrs:{slot:"reference"},slot:"reference"},[t("i",{staticClass:"el-icon-caret-right"}),e._v(e._s(a.name)+" ")])],1)],1)})),1)],1),e.roleIndex>=0?t("div",{staticClass:"user_column role_user"},[t("el-button",{staticStyle:{margin:"10px 0 10px 10px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.open_addUserForm()}}},[e._v(" 添加用户 ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleArrayByTypeNum[e.roleListIndex-"0"][e.roleIndex].users,"row-class-name":e.tableRowClassName,size:"mini",border:""}},[t("el-table-column",{attrs:{label:"姓名",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.userList[t.row-1].name)+" ")]}}],null,!1,2131940467)}),t("el-table-column",{attrs:{label:"备注",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.userList[t.row-1].notes)+" ")]}}],null,!1,509477111)})],1)],1):e._e()]):e._e(),"3"===e.activeTabsValue?t("div",[t("el-table",{staticStyle:{width:"100vw"},attrs:{data:e.roleMap,"row-class-name":e.tableRowClassName,size:"mini",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"类型",width:"330"}}),t("el-table-column",{attrs:{prop:"notes",label:"备注",width:"470"}}),t("el-table-column",[t("div",{staticClass:"table_operate_column"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.open_changeTypeAuthorityForm()}}},[e._v(" 修改类型权限 ")])],1)])],1)],1):e._e(),"1"===e.activeTabsValue?t("div",{staticClass:"pagination_box"},[t("el-pagination",{key:e.typeManagementPaginationdata.total,staticClass:"pagination",attrs:{"page-sizes":[7,10,15,20],"page-size":e.typeManagementPaginationdata.rowSize,layout:"total, sizes, prev, pager, next, jumper",total:e.typeManagementPaginationdata.total,"current-page":e.typeManagementPaginationdata.currentPage,background:""},on:{"size-change":e.typeManagement_handleSizeChange,"current-change":e.typeManagement_handleCurrentChange,"update:currentPage":function(t){return e.$set(e.typeManagementPaginationdata,"currentPage",t)},"update:current-page":function(t){return e.$set(e.typeManagementPaginationdata,"currentPage",t)}}})],1):e._e(),"3"===e.activeTabsValue?t("div",{staticClass:"pagination_box"},[t("el-pagination",{key:e.typeAuthorizePaginationdata.total,staticClass:"pagination",attrs:{"page-sizes":[7,10,15,20],"page-size":e.typeAuthorizePaginationdata.rowSize,layout:"total, sizes, prev, pager, next, jumper",total:e.typeAuthorizePaginationdata.total,"current-page":e.typeAuthorizePaginationdata.currentPage,background:""},on:{"size-change":e.typeAuthorize_handleSizeChange,"current-change":e.typeAuthorize_handleCurrentChange,"update:currentPage":function(t){return e.$set(e.typeAuthorizePaginationdata,"currentPage",t)},"update:current-page":function(t){return e.$set(e.typeAuthorizePaginationdata,"currentPage",t)}}})],1):e._e()]):e._e()],1)],1)],1)],1)},o=[];a(560);let i=null;var n={data(){return{activeTabsValue:"0",editableTabs:[],tabSumIndex:1,AdminPagesData:[{name:"教务处主任",typeNum:3,users:[1,2],notes:"教务处",isAdmin:!1,homeUrl:"",homeName:"教务处首页"},{name:"信息学院负责人",typeNum:4,users:[],notes:"",isAdmin:!1,homeUrl:"",homeName:"学院负责人首页"},{name:"计算机专业负责人",typeNum:6,users:[3,4,5],notes:"",isAdmin:!1,homeUrl:"",homeName:""},{name:"电控学院负责人",typeNum:4,users:[],notes:"",isAdmin:!1,homeUrl:"",homeName:""},{name:"自动化专业负责人",typeNum:6,users:[6],notes:"",isAdmin:!1,homeUrl:"",homeName:"专业负责人首页"},{name:"经管学院负责人",typeNum:4,users:[],notes:"",isAdmin:!1,homeUrl:"",homeName:""},{name:"计算机专业本科生",typeNum:10,users:[8],notes:"",isAdmin:!1,homeUrl:"",homeName:"学生首页"}],roleArrayByTypeNum:[],roleMap:[{typeNum:1,name:"超级管理员",notes:"",homeName:""},{typeNum:2,name:"教学秘书",notes:"",homeName:""},{typeNum:3,name:"教务处",notes:"",homeName:""},{typeNum:4,name:"学院负责人",notes:"",homeName:""},{typeNum:5,name:"系主任",notes:"",homeName:""},{typeNum:6,name:"专业负责人",notes:"",homeName:""},{typeNum:7,name:"课程负责人",notes:"",homeName:""},{typeNum:8,name:"任课教师",notes:"",homeName:""},{typeNum:9,name:"助教",notes:"",homeName:""},{typeNum:10,name:"学生",notes:"",homeName:""}],userList:[{id:1,userName:"吕德华",name:"吕德华",notes:""},{id:2,userName:"徐主任",name:"徐主任",notes:""},{id:3,userName:"李源",name:"李源",notes:""},{id:4,userName:"孙晶",name:"孙晶",notes:""},{id:5,userName:"方英兰",name:"方英兰",notes:""},{id:6,userName:"闫昊",name:"闫昊",notes:""},{id:7,userName:"张顺心",name:"张顺心",notes:""},{id:8,userName:"张心玮",name:"张心玮",notes:""},{id:9,userName:"张心瑞",name:"张心瑞",notes:""}],formLabelWidth:"80px",add_typeFormVisible:!1,add_typeFormData:{typeName:"",notes:""},typeManagementPaginationdata:{total:100,currentPage:1,rowSize:7},changeTypeAuthorityFormVisible:!1,treeData:[{label:"一级 1",children:[{label:"二级 1-1",children:[{label:"三级 1-1-1",children:[]},{label:"三级 1-1-2",children:[]}]}]},{label:"一级 2",children:[{label:"二级 2-1",children:[]},{label:"二级 2-2",children:[]}]},{label:"一级 3",children:[{label:"二级 3-1",children:[]},{label:"二级 3-2",children:[]}]},{label:"一级 1",children:[{label:"二级 1-1",children:[{label:"三级 1-1-1",children:[]},{label:"三级 1-1-2",children:[]}]}]},{label:"一级 2",children:[{label:"二级 2-1",children:[]},{label:"二级 2-2",children:[]}]},{label:"一级 3",children:[{label:"二级 3-1",children:[]},{label:"二级 3-2",children:[]}]}],defaultProps:{children:"children",label:"label"},typeAuthorizePaginationdata:{total:80,currentPage:1,rowSize:7},roleListIndex:"",roleIndex:-1,add_roleFormVisible:!1,add_roleFormData:{roleName:"",notes:""},add_userFormVisible:!1}},methods:{checkTab(e,t){let a=!1;for(let l=0;l<this.editableTabs.length;l++)if(this.editableTabs[l].index===e){a=!0,this.activeTabsValue=e;break}if(!a){let a=e;this.editableTabs.push({name:t,index:a}),this.activeTabsValue=a,this.tabSumIndex++}},removeTab(e){let t=this.editableTabs,a=this.activeTabsValue;a===e&&t.forEach(((l,o)=>{if(l.index===e){let e=t[o+1]||t[o-1];a=e?e.index:"0"}})),this.activeTabsValue=a,this.editableTabs=t.filter((t=>t.index!==e)),this.tabSumIndex--},handleCommand(e){"GoUserInfo"==e?this.$router.push("/userInfo"):"logout"==e&&this.$router.push("/login")},updateTime(){var e=new Date;document.getElementById("current_time").innerHTML=e.toLocaleTimeString()},tableRowClassName({rowIndex:e}){return e%2==0?"changeColor-row":""},clearAddRoleTypeForm(){this.add_typeFormData.typeName=this.add_typeFormData.notes=""},open_addRoleTypeForm(){this.clearAddRoleTypeForm(),this.add_typeFormVisible=!0},confirmAddRoleType(){this.add_typeFormVisible=!1;let e=this.roleMap.length;this.roleMap.push({typeNum:e+1,name:this.add_typeFormData.typeName,notes:this.add_typeFormData.notes}),this.roleArrayByTypeNum[e]=[],this.roleArrayByTypeNum.splice(this.roleArrayByTypeNum.length,0),this.clearAddRoleTypeForm(),this.$message({type:"success",message:"添加成功!"})},close_addRoleTypeForm(){this.add_typeFormVisible=!1,this.clearAddRoleTypeForm()},confirmDeleteMessage(){this.$confirm("此操作将永久删除该类型及其下所有角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$message({type:"success",message:"删除成功"})})).catch((()=>{}))},changeType(e){this.$prompt("请输入新的类型","修改类型",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:t})=>{this.roleMap[e].name=t,this.$message({type:"success",message:"修改成功"})})).catch((()=>{}))},typeManagement_handleSizeChange(e){console.log(`每页 ${e} 条`),this.typeManagementPaginationdata.rowSize=e},typeManagement_handleCurrentChange(e){console.log(`当前页: ${e}`),this.typeManagementPaginationdata.currentPage=e},typeAuthorize_handleSizeChange(e){console.log(`每页 ${e} 条`),this.typeAuthorizePaginationdata.rowSize=e},typeAuthorize_handleCurrentChange(e){console.log(`当前页: ${e}`),this.typeAuthorizePaginationdata.currentPage=e},open_changeTypeAuthorityForm(){this.changeTypeAuthorityFormVisible=!0},handleCheckChange(e){let t=e.checked;this.checkAllChildren(e,t),this.checkAllParents(e,t)},checkAllChildren(e,t){e.setChecked(t),e.childNodes.forEach((e=>{this.checkAllChildren(e,t)}))},checkAllParents(e,t){if(e.parent){let a=e.parent.childNodes.every((e=>e.checked===t));a&&(e.parent.setChecked(t),this.checkAllParents(e.parent,t))}},classifyRolesBytypeNum(){for(let e of this.roleMap)this.roleArrayByTypeNum[e.typeNum-1]=[];for(let e of this.AdminPagesData)this.roleArrayByTypeNum[e.typeNum-1].push(e),""===this.roleMap[e.typeNum-1].homeName&&(this.roleMap[e.typeNum-1].homeName=e.homeName)},showRoleUser(e,t){this.roleListIndex=e+"",this.roleIndex=t,this.$refs.popoverRef[e].doClose()},clearAddRoleForm(){this.add_roleFormData.roleName=this.add_roleFormData.notes=""},open_addRoleForm(e){this.clearAddRoleForm(),this.roleListIndex!=e&&(this.roleIndex=-1),this.roleListIndex=e+"",this.add_roleFormVisible=!0},confirmAddRole(e){this.roleArrayByTypeNum[e].push({name:this.add_roleFormData.roleName,typeNum:e+1,users:[],notes:this.add_roleFormData.notes}),this.roleArrayByTypeNum[e].splice(this.roleArrayByTypeNum[e].length,0),this.add_roleFormVisible=!1,this.clearAddRoleForm()},close_addRoleForm(){this.add_roleFormVisible=!1,this.clearAddRoleForm()},open_addUserForm(){this.add_userFormVisible=!0},close_addUserForm(){this.add_userFormVisible=!1},confirmAddUser(){this.add_userFormVisible=!1}},mounted(){i=setInterval(this.updateTime,1e3),this.classifyRolesBytypeNum()},beforeDestroy(){clearInterval(i)}},r=n,s=a(1001),d=(0,s.Z)(r,l,o,!1,null,"72e0e7be",null),c=d.exports},3137:function(e,t,a){e.exports=a.p+"img/ask.25890280.jpg"}}]);
//# sourceMappingURL=255.58ccc78f.js.map